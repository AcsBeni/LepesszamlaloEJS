<%- include('header') %>
<%- include('message') %>

<div class="container mt-5">
  <div class="card rounded-3 shadow-sm" style="background-color:#B8D8D8;">
    <div class="card-body">
      <h5 class="card-title mb-3">Lépés Naptár</h5>
      <div id="stepsCalendar"></div>
    </div>
  </div>
</div>

<!-- FullCalendar JS & CSS -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const calendarEl = document.getElementById('stepsCalendar');

    const calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      themeSystem: 'bootstrap',
      height: 600,
      headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,timeGridDay'
      },
      events: <%- JSON.stringify(results.map(r => ({
          title: r.steps + ' lépés',
          start: r.date,
          backgroundColor: '#7A9E9F',
          borderColor: '#4F6367',
          textColor: '#EEF6F6'
      }))) %>,
      editable: false,
      selectable: true,
      dayMaxEvents: true
    });

    calendar.render();
  });
</script>

<%- include('footer') %>
